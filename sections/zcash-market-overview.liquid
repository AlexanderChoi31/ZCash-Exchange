{{ 'zcash-theme.css' | asset_url | stylesheet_tag }}
{{ 'zcash-live-tracker.js' | asset_url | script_tag }}

<section class="zcash-section color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    <div class="zcash-section-header">
      <div>
        {%- if section.settings.eyebrow != blank -%}
          <p class="zcash-section-header__eyebrow">{{ section.settings.eyebrow }}</p>
        {%- endif -%}
        <h2 class="zcash-section-header__title">{{ section.settings.heading }}</h2>
      </div>
      {%- if section.settings.description != blank -%}
        <p>{{ section.settings.description }}</p>
      {%- endif -%}
    </div>

    <div class="zcash-grid zcash-grid--two">
      <div class="zcash-card zcash-market__metrics">
        <div class="zcash-hero__badge">
          <span class="zcash-logo-mark" aria-hidden="true">{% render 'zcash-logo' %}</span>
          <span>{{ section.settings.market_badge }}</span>
        </div>
        {%- if section.blocks.size > 0 -%}
          {%- for block in section.blocks -%}
            <div class="zcash-metric" {{ block.shopify_attributes }}>
              <span class="zcash-metric__label">{{ block.settings.label }}</span>
              <span class="zcash-metric__value">{{ block.settings.value }}</span>
              {%- if block.settings.trend != blank -%}
                <span class="zcash-metric__trend">{{ block.settings.trend }}</span>
              {%- endif -%}
            </div>
          {%- endfor -%}
        {%- else -%}
          <div class="zcash-metric">
            <span class="zcash-metric__label">Price</span>
            <span class="zcash-metric__value">$43.27</span>
            <span class="zcash-metric__trend">+4.3% · 24h</span>
          </div>
          <div class="zcash-metric">
            <span class="zcash-metric__label">Volume</span>
            <span class="zcash-metric__value">$72M</span>
            <span class="zcash-metric__trend">Across 18 markets</span>
          </div>
          <div class="zcash-metric">
            <span class="zcash-metric__label">Shielded usage</span>
            <span class="zcash-metric__value">68%</span>
            <span class="zcash-metric__trend">Last 1,000 tx</span>
          </div>
        {%- endif -%}

        <div class="zcash-market__convert">
          <h3>{{ section.settings.convert_heading }}</h3>
          <form>
            <div class="zcash-input-group">
              <input type="number" name="zcash_amount" placeholder="Amount" min="0" step="0.01">
              <select name="zcash_pair">
                <option value="ZEC">ZEC</option>
                <option value="USD">USD</option>
                <option value="BTC">BTC</option>
              </select>
            </div>
            <div class="zcash-input-group">
              <input type="text" readonly value="≈ $4,327.00">
              <select name="zcash_quote">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="CAD">CAD</option>
              </select>
            </div>
            <button type="button" class="button button--primary">
              {{ section.settings.convert_cta }}
            </button>
          </form>
        </div>
      </div>

      <div
        class="zcash-card zcash-ticker"
        data-zcash-tracker
        data-currency="{{ section.settings.live_currency | downcase }}"
        data-interval="{{ section.settings.live_refresh_interval }}"
        data-provider="coingecko"
      >
        <div class="zcash-hero__badge">
          <span class="zcash-logo-mark" aria-hidden="true">{% render 'zcash-logo' %}</span>
          <span>{{ section.settings.live_badge }}</span>
        </div>
        <div class="zcash-ticker__grid">
          <div>
            <p class="zcash-ticker__label">Spot price</p>
            <p class="zcash-ticker__value" data-tracker-field="price">
              {{ section.settings.live_placeholder_price }}
            </p>
            <p class="zcash-ticker__delta" data-tracker-field="change" data-direction="flat">
              {{ section.settings.live_placeholder_change }}
            </p>
          </div>
          <div>
            <p class="zcash-ticker__label">Last update</p>
            <p class="zcash-ticker__value" data-tracker-field="updated">--:--</p>
            <p>{{ section.settings.live_timezone_note }}</p>
          </div>
          <div>
            <p class="zcash-ticker__label">Source</p>
            <p class="zcash-ticker__value">{{ section.settings.live_source_label }}</p>
            <p>{{ section.settings.live_source_note }}</p>
          </div>
        </div>

        <p class="zcash-ticker__label">{{ section.settings.live_range_label }}</p>
        <div class="zcash-ticker__spark" role="img" aria-label="{{ section.settings.live_graph_label }}">
          <svg viewBox="0 0 400 120" preserveAspectRatio="none">
            <defs>
              <linearGradient id="spark-line-{{ section.id }}" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#1fff9c"></stop>
                <stop offset="100%" stop-color="#34ffa7"></stop>
              </linearGradient>
              <linearGradient id="spark-fill-{{ section.id }}" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" stop-color="rgba(52, 255, 167, 0.35)"></stop>
                <stop offset="100%" stop-color="rgba(52, 255, 167, 0)"></stop>
              </linearGradient>
            </defs>
            <path
              d="M0,110 L0,95 C40,80 80,92 120,70 C160,58 200,40 240,55 C280,35 320,44 360,32 C375,30 390,34 400,32 L400,110 Z"
              fill="url(#spark-fill-{{ section.id }})"
            ></path>
            <path
              d="M0,95 C40,80 80,92 120,70 C160,58 200,40 240,55 C280,35 320,44 360,32 C375,30 390,34 400,32"
              stroke="url(#spark-line-{{ section.id }})"
              stroke-width="2.5"
              stroke-linecap="round"
              stroke-linejoin="round"
              fill="none"
            ></path>
            <circle class="zcash-ticker__dot" cx="400" cy="32" r="5"></circle>
          </svg>
        </div>

        <div class="zcash-ticker__meta">
          <span>{{ section.settings.live_meta_one }}</span>
          <span>{{ section.settings.live_meta_two }}</span>
          <span>{{ section.settings.live_meta_three }}</span>
        </div>

        <p class="zcash-ticker__status" data-tracker-status>
          {{ section.settings.live_status_label }}
        </p>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Zcash market overview",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow",
      "default": "Prices & charts"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Live-market style telemetry"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Simulated quotes, market depth, and shielded statistics help you demo a ZEC exchange experience without touching production rails."
    },
    {
      "type": "text",
      "id": "convert_heading",
      "label": "Convert module heading",
      "default": "Convert ZEC to USD"
    },
    {
      "type": "text",
      "id": "convert_cta",
      "label": "Convert button label",
      "default": "Convert now"
    },
    {
      "type": "text",
      "id": "market_badge",
      "label": "Metrics badge text",
      "default": "Telemetry desk"
    },
    {
      "type": "text",
      "id": "live_badge",
      "label": "Live tracker badge text",
      "default": "Live tracker"
    },
    {
      "type": "select",
      "id": "live_currency",
      "label": "Live currency",
      "default": "usd",
      "options": [
        { "value": "usd", "label": "USD" },
        { "value": "eur", "label": "EUR" },
        { "value": "gbp", "label": "GBP" }
      ]
    },
    {
      "type": "range",
      "id": "live_refresh_interval",
      "label": "Refresh interval (seconds)",
      "default": 30,
      "min": 15,
      "max": 120,
      "step": 5
    },
    {
      "type": "text",
      "id": "live_placeholder_price",
      "label": "Placeholder price",
      "default": "$43.27"
    },
    {
      "type": "text",
      "id": "live_placeholder_change",
      "label": "Placeholder change",
      "default": "+4.3%"
    },
    {
      "type": "text",
      "id": "live_timezone_note",
      "label": "Timezone note",
      "default": "Local time"
    },
    {
      "type": "text",
      "id": "live_source_label",
      "label": "Source label",
      "default": "CoinGecko"
    },
    {
      "type": "textarea",
      "id": "live_source_note",
      "label": "Source note",
      "default": "Public API · refreshed continuously"
    },
    {
      "type": "text",
      "id": "live_range_label",
      "label": "Range label",
      "default": "1 month view"
    },
    {
      "type": "text",
      "id": "live_graph_label",
      "label": "Graph aria label",
      "default": "One month ZEC price trend with real-time highlight"
    },
    {
      "type": "text",
      "id": "live_meta_one",
      "label": "Meta badge 1",
      "default": "Spot markets · simulated"
    },
    {
      "type": "text",
      "id": "live_meta_two",
      "label": "Meta badge 2",
      "default": "Shielded adoption narrative"
    },
    {
      "type": "text",
      "id": "live_meta_three",
      "label": "Meta badge 3",
      "default": "Updated automatically"
    },
    {
      "type": "text",
      "id": "live_status_label",
      "label": "Live status label",
      "default": "Live feed standing by"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1",
      "options": [
        { "value": "background-1", "label": "Background 1" },
        { "value": "background-2", "label": "Background 2" },
        { "value": "inverse", "label": "Inverse" },
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" }
      ]
    }
  ],
  "blocks": [
    {
      "type": "metric",
      "name": "Metric",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Price"
        },
        {
          "type": "text",
          "id": "value",
          "label": "Value",
          "default": "$43.27"
        },
        {
          "type": "text",
          "id": "trend",
          "label": "Trend text",
          "default": "+4.3% · 24h"
        }
      ]
    }
  ],
  "max_blocks": 5,
  "presets": [
    {
      "name": "Zcash market overview",
      "blocks": [
        { "type": "metric" },
        { "type": "metric" },
        { "type": "metric" }
      ]
    }
  ]
}
{% endschema %}
